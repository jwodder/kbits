{% extends "base.html" %}

{% block html_lang %}{{article.lang}}{% endblock %}

{% block title %}{{SITENAME}} — {{article.title|striptags}}{% endblock %}

{% block extra_head %}
    {% import 'translations.j2' as translations with context %}
    {{translations.entry_hreflang(article)}}

    {% if article.summary %}
        <meta name="description" content="{{article.summary|striptags|escape}}"/>
    {% elif article.description %}
        <meta name="description" content="{{article.description|escape}}"/>
    {% endif %}

    {% for tag in article.tags %}
        <meta name="tags" content="{{tag|escape}}"/>
    {% endfor %}

    {% for author in article.authors %}
        <meta name="author" content="{{author|escape}}"/>
    {% endfor %}

    {% if article.tags %}
        <meta name="keywords" content="{{article.tags|join(',')|escape}}"/>
    {% endif %}
{% endblock %}

{% block content %}
<section id="content" class="body">
    <article>
        <header>
            <h2 class="entry-title">
                <a href="{{SITEURL}}/{{article.url}}" rel="bookmark"
                    title="Permalink to {{article.title|striptags}}">{{article.title}}</a>
            </h2>
            {% import 'translations.j2' as translations with context %}
            {{translations.translations_for(article)}}
        </header>
        <footer class="post-info">
            <time class="published" datetime="{{article.date.isoformat()}}" pubdate="1">
                {{article.locale_date}}
            </time>
            {% if article.modified %}
            <span class="last-updated">(last updated
            <time class="modified" datetime="{{article.modified.isoformat()}}">
                {{article.locale_modified}}
            </time>)</span>
            {% endif %}
            {% if SHOW_AUTHOR and article.authors %}
            <address class="vcard author">
                By {% for author in article.authors %}
                    {% if LINK_AUTHOR %}
                    <a class="url fn" href="{{SITEURL}}/{{author.url}}">{{author}}</a>
                    {% else %}
                    <span class="fn">{{author}}</span>
                    {% endif %}
                {% endfor %}
            </address>
            {% endif %}
            {% if article.category %}
            <div class="category">
                Category: <a href="{{SITEURL}}/{{article.category.url}}">{{article.category}}</a>
            </div>
            {% endif %}
            <div class="tags">
                Tags:
                {% if article.tags %}
                    {% for tag in article.tags %}<a href="{{SITEURL}}/{{tag.url}}">{{tag}}</a>{{', ' if not loop.last}}{% endfor %}
                {% else %}
                    —
                {% endif %}
            </div>
            {% if GITHUB_URL %}
            <div class="sourcelink">
                <a href="{{GITHUB_URL}}/blob/master/{{PATH_IN_REPO}}/{{article.relative_source_path}}">Page Source</a>
            </div>
            {% endif %}
        </footer><!-- /.post-info -->
        <div class="entry-content">
            {{article.content}}
        </div><!-- /.entry-content -->
    </article>
</section>
{% endblock %}
